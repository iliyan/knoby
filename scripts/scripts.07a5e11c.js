"use strict";angular.module("knoby.lodash",[]).run(["lodash",angular.noop]).service("lodash",["$window",function(a){var b=a._;return delete a._,b}]),angular.module("knobyApp",["knoby.lodash","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("knobyApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("knobyApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("knobyApp").factory("raphael",["$document","$q","$window",function(a,b,c){var d=b.defer();return a.ready(function(){d.resolve(c.Raphael)}),d.promise}]),angular.module("knobyApp").factory("knobs",[function(){function a(a,b,c){var d=this;this.destroy=function(){a.undrag()},this.onMove=function(a,b){this.transform(d.t+"T"+a+","+b)},this.onStart=function(){return d.t=this.transform(),angular.isFunction(b)?b.call(this):void 0},a.drag(this.onMove,this.onStart,function(){d.t=this.transform(),c.call(this)})}function b(a,b){b.hide(),a.hover(function(){b.show()},function(){b.hide()}),this.destroy=function(){a.unhover(),b.remove()}}function c(a){this.clazz=[this.clazz,a].join(" ")}function d(a){this.attach(a)}function e(a){this.attach(a)}function f(a){this.attach(a)}return a.prototype={},a.prototype.constructor=a,b.prototype={},b.prototype.constructor=b,c.prototype={clazz:"kby-knob"},c.prototype.constructor=c,c.prototype.toggler=function(a){var b=this;b.view.node.classList.toggle(a),b.view.undblclick(),b.view.dblclick(function(){b.toggler.call(b,a)})},c.prototype.attach=function(b){if(!b)throw new ReferenceError;var c=this;c.view=b,angular.element(c.view.node).attr("class",c.clazz),c.view.node.classList.add("adjustable"),c.toggler("adjustable"),c.onDragEnd=function(){this.node.classList.remove("mobile")},c.onDragStart=function(){this.node.classList.add("mobile")},c.dragster=new a(c.view,c.onDragStart,c.onDragEnd);var d=0,e=0;c.view.node.addEventListener("wheel",function(a){var b=Math.sign(a.deltaY);d+=b*e,this.style["stroke-dashoffset"]=d+"em",e=b,console.log(d),a.preventDefault()})},d.prototype=new c("kby-condition"),d.prototype.constructor=d,e.prototype=new c("kby-command"),e.prototype.constructor=e,f.prototype=new c("kby-destination"),f.prototype.constructor=f,{DragController:a,HoverController:b,ConditionController:d,CommandController:e,DestinationController:f}}]).factory("factories",["knobs",function(a){function b(a){this.clazz=["kby-factory",a].join(" ")}function c(a,b){this.attach(a,b)}function d(a,b){this.attach(a,b)}function e(a,b){this.attach(a,b)}return b.prototype={},b.prototype.constructor=b,b.prototype.generate=function(a,b,c){var d=new a(b);return angular.isFunction(c)?c.call(d):d},b.prototype.attach=function(b,c){if(!b)throw new ReferenceError;this.view=b,angular.element(b.node).attr("class",this.clazz),this.glow=b.glow(),this.hoverer=new a.HoverController(this.view,this.glow);var d=this;this.onDragEnd=function(){return d.dragster.destroy(),d.hoverer.destroy(),d.generate(d.producer,this,c)},this.onDragStart=function(){var a=d.generate(d.constructor,this.clone());return angular.element(this.node).attr("class",""),a},this.dragster=new a.DragController(this.view,d.onDragStart,d.onDragEnd)},c.prototype=new b("kby-condition"),c.prototype.constructor=c,c.prototype.producer=a.ConditionController,d.prototype=new b("kby-command"),d.prototype.constructor=d,d.prototype.producer=a.CommandController,e.prototype=new b("kby-destination"),e.prototype.constructor=e,e.prototype.producer=a.DestinationController,{ConditionsFactoryController:c,CommandsFactoryController:d,DestinationsFactoryController:e}}]),angular.module("knobyApp").directive("simpleKnob",["raphael","factories",function(a,b){return{template:!1,restrict:"E",link:function(c,d){a.then(function(a){var c=angular.element(d).parent()[0],e=a(c,"100%","100%"),f=[],g=[],h=new b.ConditionsFactoryController(e.circle(32,32,20),function(a){f.push(a)}),i=new b.CommandsFactoryController(e.circle(c.offsetWidth/2,32,20),function(a){g.push(a)}),j=new b.DestinationsFactoryController(e.circle(c.offsetWidth-62,32,20),function(a){g.push(a)});[].push(h,i,j)})}}}]);