"use strict";angular.module("knoby.lodash",[]).run(["lodash",angular.noop]).service("lodash",["$window",function(a){var b=a._;return delete a._,b}]),angular.module("knobyApp",["knoby.lodash","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("knobyApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("knobyApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("knobyApp").factory("raphael",["$document","$q","$window",function(a,b,c){var d=b.defer();return a.ready(function(){d.resolve(c.Raphael)}),d.promise}]),angular.module("knobyApp").factory("knobs",["lodash",function(a){function b(a,b,c){var d=this;this.destroy=function(){a.undrag()},this.onMove=function(a,b){this.transform(d.t+"T"+a+","+b)},this.onStart=function(){return d.t=this.transform(),angular.isFunction(b)?b.call(this):void 0},a.drag(this.onMove,this.onStart,function(){d.t=this.transform(),c.call(this)})}function c(a,b){b.hide(),a.hover(function(){b.show()},function(){b.hide()}),this.destroy=function(){b.remove()}}function d(a){this.clazz=["kby-factory",a].join(" ")}function e(a,b){this.attach(a,b)}function f(a,b){this.attach(a,b)}function g(a,b){this.attach(a,b)}function h(a){this.clazz=[this.clazz,a].join(" ")}function i(a){this.attach(a)}function j(a){this.attach(a)}function k(a){this.attach(a)}return b.prototype={},b.prototype.constructor=b,c.prototype={},c.prototype.constructor=c,d.prototype={},d.prototype.constructor=d,d.prototype.generate=function(a,b,c){var d=new a(b);return angular.isFunction(c)?c.call(d):d},d.prototype.attach=function(a,d){if(!a)throw new ReferenceError;this.view=a,angular.element(a.node).attr("class",this.clazz),this.glow=a.glow(),this.hoverer=new c(this.view,this.glow);var e=this;this.onDragEnd=function(){return e.dragster.destroy(),e.hoverer.destroy(),e.generate(e.producer,this,d)},this.onDragStart=function(){var a=e.generate(e.constructor,this.clone());return angular.element(this.node).attr("class",""),a},this.dragster=new b(this.view,e.onDragStart,e.onDragEnd)},e.prototype=new d("kby-condition"),e.prototype.constructor=e,e.prototype.producer=i,f.prototype=new d("kby-command"),f.prototype.constructor=f,f.prototype.producer=j,g.prototype=new d("kby-destination"),g.prototype.constructor=g,g.prototype.producer=k,h.prototype={clazz:"kby-knob"},h.prototype.constructor=h,h.prototype.toggler=function(a){var b=this;b.view.node.classList.toggle(a),b.view.undblclick(),b.view.dblclick(function(){b.toggler.call(b,a)})},h.prototype.attach=function(a){if(!a)throw new ReferenceError;var c=this;c.view=a,angular.element(c.view.node).attr("class",c.clazz),c.view.node.classList.add("adjustable"),c.toggler("adjustable"),this.onDragEnd=function(){},this.onDragStart=function(){},this.dragster=new b(this.view,c.onDragStart,c.onDragEnd)},i.prototype=new h("kby-condition"),i.prototype.constructor=i,j.prototype=new h("kby-command"),j.prototype.constructor=j,k.prototype=new h("kby-destination"),k.prototype.constructor=k,{ConditionsFactoryController:e,CommandsFactoryController:f,DestinationsFactoryController:g}}]),angular.module("knobyApp").directive("simpleKnob",["raphael","knobs",function(a,b){return{template:!1,restrict:"E",link:function(c,d){a.then(function(a){var c=angular.element(d).parent()[0],e=a(c,"100%","100%"),f=[],g=[];new b.ConditionsFactoryController(e.circle(32,32,20),function(a){f.push(a)}),new b.CommandsFactoryController(e.circle(c.offsetWidth/2,32,20),function(a){g.push(a)}),new b.DestinationsFactoryController(e.circle(c.offsetWidth-62,32,20),function(a){g.push(a)})})}}}]);